name: NewRelic

on: 
  push: 
    branches: ["main"]

    workflow_dispatch:

jobs:
  terraform:
    name: 'NR GitHub Actions Demo'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
      - uses: actions/checkout@v3

      - name: run a one-line script
        run: echo this is terraform code

      - uses: actions/checkout@v2
      - uses: hashicorp/setup-terraform@v2

      - name: Terraform Init
        id: init
        run: terraform init

        # - name: Terraform Validate
        #   id: validate
        #   run: terraform validate -no-color

        - name: Terraform Plan
          id: plan
          run: terraform plan -no-color
          continue-on-error: true

# name: First workflow Terraform

# on:
#   push:
#     branches: [ "main" ]
#   pull_request:
#     branches: [ "main" ]
    
 
# jobs: 
#   terraform:
#     name: 'NR GitHub Actions Demo'
#     runs-on: ubuntu-latest
        
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v2

#       - name: Setup Terraform
#         uses: hashicorp/setup-terraform@v1
#         with:
#           terraform_version: 1.0.0

#       # - name: Create New Relic deployment marker
#       #   uses: newrelic/deployment-marker-action@v1
#       #   with:
#       #     apiKey: ${{ secrets.NEW_RELIC_API_KEY }}
#       #     accountId: ${{ secrets.NEW_RELIC_ACCOUNT_ID }}
          

#       - name: Terraform Init
#         id  : init
#         run : terraform init

#       - name: Terraform refresh
#         run : terraform refresh

#       # - name: Terraform Plan
#       #   id  : plan
#       #   run : terraform plan 
        

#       # - name: Terraform Apply
#       #   run : terraform apply -auto-approve

#       - name: Terraform Destroy
#         run : terraform destroy -auto-approve