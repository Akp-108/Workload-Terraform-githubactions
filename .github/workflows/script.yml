name: NewRelic

on: 
  push: 
    branches: ["main"]

    workflow_dispatch:

jobs:
  terraform:
    name: 'NR GitHub Actions Demo'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
      - uses: actions/checkout@v3

      - name: run a one-line script
        run: echo this is terraform code

      - uses: actions/checkout@v2
      - uses: hashicorp/setup-terraform@v2

      - name: Terraform Init
        id: init
        run: terraform init

        # - name: Terraform Validate
        #   id: validate
        #   run: terraform validate -no-color

        - name: Terraform Plan
          id: plan
          run: terraform plan -no-color
          continue-on-error: true